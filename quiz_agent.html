<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="description" content="Cuestionario interactivo de filosof√≠a. Pon a prueba tus conocimientos." />
    <meta name="keywords" content="filosof√≠a, cuestionario, educaci√≥n, √©tica, antropolog√≠a, existencialismo" />
    <meta name="author" content="Cuestionarios de Filosof√≠a" />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Filosof√≠a Quiz" />

    <!-- Favicon -->
    <link
        rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>"
    />

    <title id="page-title">üß† Cuestionario de Filosof√≠a</title>
    <link rel="stylesheet" href="css/quiz.css" />
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>üß† Cargando cuestionario...</h2>
            <p id="loading-message">Preparando preguntas</p>
            <div class="loading-progress">
                <div class="loading-bar" id="loading-bar"></div>
            </div>
        </div>
    </div>

    <!-- Main Quiz Container -->
    <div id="quiz-container" class="quiz-container hidden">
        <!-- Header -->
        <header class="quiz-header">
            <div class="quiz-nav">
                <button id="back-btn" class="nav-btn">‚Üê Volver a temas</button>
                <div class="theme-info">
                    <span id="theme-icon" class="theme-icon">üß†</span>
                    <span id="theme-title" class="theme-title">Filosof√≠a</span>
                </div>
                <button id="help-btn" class="nav-btn">üìö Material</button>
            </div>
        </header>

        <!-- Level Tabs for multi‚Äëphase games -->
        <nav id="level-tabs" class="level-tabs">
            <button id="tab-concepts" class="level-tab">1) Caza de conceptos</button>
            <button id="tab-synthesis" class="level-tab" disabled>2) S√≠ntesis</button>
            <button id="tab-map" class="level-tab" disabled>3) Mapa conceptual</button>
            <button id="tab-quiz" class="level-tab" disabled>4) Quiz</button>
        </nav>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-info">
                <div class="progress-item">
                    <span class="progress-label">Etapa</span>
                    <span id="stage-label" class="progress-value">Quiz</span>
                </div>
                <div class="progress-item">
                    <span class="progress-label">Progreso</span>
                    <span id="question-counter" class="progress-value">1/10</span>
                </div>
                <div class="progress-item">
                    <span class="progress-label">Puntaje</span>
                    <span id="score" class="progress-value">0</span>
                </div>
                <div class="progress-item">
                    <span class="progress-label">Tiempo</span>
                    <span id="timer" class="progress-value">30s</span>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <!-- Progress bar for concept hunt -->
            <div id="concept-progress" class="mini-progress hidden">
                <span class="progress-label">Conceptos del p√°rrafo</span>
                <span id="concept-counter" class="progress-value">0/0</span>
            </div>
        </div>

        <!-- Question Container -->
        <main id="question-container" class="question-container">
            <!-- Concept Hunt Phase (Level 1) -->
            <section id="concept-hunt-phase" class="phase concept-hunt-phase hidden">
                <div class="phase-header">
                    <h3>üîé Caza de conceptos</h3>
                    <p class="phase-desc">
                        Selecciona las palabras o frases que condensan la idea del p√°rrafo. Completa los conceptos para avanzar.
                    </p>
                </div>
                <article class="concept-paragraph-card">
                    <header class="concept-paragraph-header">
                        <span id="paragraph-index" class="badge">P√°rrafo 1</span>
                        <span id="concepts-remaining" class="badge info">Conceptos por descubrir: 0</span>
                    </header>
                    <p id="concept-paragraph-text" class="concept-paragraph-text"></p>
                    <div id="concept-feedback" class="concept-feedback"></div>
                    <div class="concept-actions">
                        <button id="skip-paragraph-btn" class="tertiary-btn">‚è≠Ô∏è Siguiente p√°rrafo</button>
                        <button id="reveal-hints-btn" class="secondary-btn">üí° Pista</button>
                        <button id="to-synthesis-btn" class="primary-btn" disabled>‚úÖ Pasar a s√≠ntesis</button>
                    </div>
                </article>
            </section>

            <!-- Synthesis Phase (Level 2) -->
            <section id="synthesis-phase" class="phase synthesis-phase hidden">
                <div class="phase-header">
                    <h3>üß© Frase s√≠ntesis</h3>
                    <p class="phase-desc">
                        Elige la frase que mejor sintetiza el sentido del p√°rrafo trabajado.
                    </p>
                </div>
                <div class="synthesis-card">
                    <header class="synthesis-header">
                        <span id="synthesis-paragraph-index" class="badge">P√°rrafo 1</span>
                        <span id="synthesis-progress" class="badge info">0/0</span>
                    </header>
                    <p id="synthesis-paragraph-brief" class="synthesis-brief"></p>
                    <div id="synthesis-options" class="synthesis-options"></div>
                    <div id="synthesis-feedback" class="synthesis-feedback"></div>
                    <div class="synthesis-actions">
                        <button id="prev-synthesis" class="tertiary-btn">‚üµ Anterior</button>
                        <button id="next-synthesis" class="secondary-btn">Siguiente ‚ü∂</button>
                    </div>
                </div>
                <div class="phase-actions">
                    <button id="to-map-btn" class="primary-btn" disabled>‚úÖ Pasar a mapa</button>
                </div>
            </section>

            <!-- Concept Map Phase (Level 3) -->
            <section id="concept-map-phase" class="phase concept-map-phase hidden">
                <div class="phase-header">
                    <h3>üó∫Ô∏è Mapa conceptual</h3>
                    <p class="phase-desc">
                        Selecciona los nodos esenciales para completar el mapa conceptual y desbloquear el quiz.
                    </p>
                </div>
                <div class="concept-map-wrapper">
                    <div id="concept-map-board" class="concept-map-board"></div>
                    <aside class="concept-map-sidebar">
                        <div class="sidebar-section">
                            <h4>Nodos</h4>
                            <ul id="concept-map-nodes" class="node-list"></ul>
                        </div>
                        <div class="sidebar-section">
                            <h4>Relaciones</h4>
                            <ul id="concept-map-edges" class="edge-list"></ul>
                        </div>
                        <div class="sidebar-section">
                            <h4>Progreso</h4>
                            <div class="mini-progress">
                                <span class="progress-label">V√≠nculos n√∫cleo</span>
                                <span id="map-core-counter" class="progress-value">0/0</span>
                            </div>
                        </div>
                    </aside>
                </div>
                <div class="phase-actions">
                    <button id="to-quiz-btn" class="primary-btn" disabled>‚úÖ Pasar a quiz</button>
                </div>
            </section>

            <!-- Quiz Phase (Level 4) -->
            <section id="quiz-phase" class="phase quiz-phase hidden">
                <!-- Help Text Phase -->
                <div id="help-phase" class="phase help-phase">
                    <div class="help-content">
                        <h3>üí° Pista</h3>
                        <p id="help-text" class="help-text"></p>
                        <div class="help-actions">
                            <button id="show-question-btn" class="primary-btn">üìù Ver pregunta</button>
                            <button id="show-material-btn" class="secondary-btn">üìñ Consultar material</button>
                        </div>
                    </div>
                </div>

                <!-- Question Phase -->
                <div id="question-phase" class="phase question-phase hidden">
                    <div class="question-content">
                        <h2 id="question-text" class="question-text"></h2>
                        <div id="answers-container" class="answers-container"></div>
                    </div>
                </div>

                <!-- Results Phase -->
                <div id="results-phase" class="phase results-phase hidden">
                    <div class="results-content">
                        <div class="results-header">
                            <div id="results-icon" class="results-icon"></div>
                            <h2 id="results-title" class="results-title">¬°Cuestionario completado!</h2>
                        </div>
                        <div class="results-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="final-score">0</div>
                                <div class="stat-label">Puntaje final</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="correct-answers">0/0</div>
                                <div class="stat-label">Respuestas correctas</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-time">0s</div>
                                <div class="stat-label">Tiempo total</div>
                            </div>
                        </div>
                        <div class="results-message" id="results-message">
                            <p>¬°Excelente trabajo! Has demostrado un buen dominio del tema.</p>
                        </div>
                        <div class="results-actions">
                            <button id="retry-btn" class="primary-btn">üîÑ Intentar de nuevo</button>
                            <button id="themes-btn" class="secondary-btn">üè† Otros temas</button>
                            <button id="review-btn" class="tertiary-btn">üìã Revisar respuestas</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Study Material Modal -->
    <div id="material-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">üìñ Material de Estudio</h3>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Contenido del material se carga aqu√≠ -->
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã Revisi√≥n de Respuestas</h3>
                <button class="close-btn" id="close-review">&times;</button>
            </div>
            <div class="modal-body" id="review-body">
                <!-- Revisi√≥n de respuestas se genera aqu√≠ -->
            </div>
        </div>
    </div>

    <!-- Error Screen -->
    <div id="error-screen" class="error-screen hidden">
        <div class="error-content">
            <div class="error-icon">‚ùå</div>
            <h2>Error al cargar el cuestionario</h2>
            <p id="error-message">No se pudo cargar el tema seleccionado.</p>
            <button id="retry-load-btn" class="primary-btn">üîÑ Reintentar</button>
            <button id="back-to-themes-btn" class="secondary-btn">üè† Volver a temas</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/quiz-engine.js"></script>
</body>
</html>